---
// SectionContainer.astro
interface Props {
  id: string;
  secondary?: boolean;
}

const { id, secondary } = Astro.props;
---

<section
  id={id}
  class={`md:min-w-3xl section-container text-foreground ${secondary && 'bg-secondary/50'} p-5 md:px-16 md:py-8 w-full max-w-full text-left opacity-0 translate-y-10 transition-all`}
>
  <slot />
</section>

<style>
  .fade-in-bottom {
    animation: fadeInBottom 0.6s ease-out forwards;
  }

  @keyframes fadeInBottom {
    from {
      opacity: 0;
      transform: translateY(40px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>

<script>
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('fade-in-bottom');
          entry.target.classList.remove('opacity-0', 'translate-y-10');
        }
      });
    },
    {
      threshold: 0.01,
      rootMargin: '0px 0px -100px 0px',
    }
  );

  document.querySelectorAll('.section-container').forEach((section) => {
    observer.observe(section);
  });
</script>