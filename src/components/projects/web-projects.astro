---
import ProjectContainer from "./project-container.astro";

const iconModules = import.meta.glob<{ default: ImageMetadata }>('../../assets/icons/**/*.webp', { eager: true });
const bannerModules = import.meta.glob<{ default: ImageMetadata }>('../../assets/project-banners/web/**/*.webp', { eager: true });

const getIconPath = (path: string) => {
  const fullPath = `../../assets/icons/${path}`;
  return iconModules[fullPath]?.default?.src || '';
};

const getBannerPath = (path: string) => {
  const fullPath = `../../assets/project-banners/web/${path}`;
  return bannerModules[fullPath]?.default?.src || '';
};
---

<ProjectContainer
  imgPath={getBannerPath("crm-application.webp")}
  title="CRM Application (Ongoing)"
  imgAlt="Multi-organization CRM Web Application with user management across multiple organizations"
  skillIcons={[
    getIconPath("frontend/tanstack-query-icon.webp"),
    getIconPath("frontend/shadcn-ui-icon.webp"),
    getIconPath("frontend/nextjs-icon.webp"),
    getIconPath("backend/supabase-icon.webp"),
    getIconPath("backend/postgresql-icon.webp"),
    getIconPath("language/typescript-icon.webp"),
    getIconPath("frontend/tailwind-css-icon.webp"),
  ]}
  skillIconAlts={[
    "tanstack",
    "shadcn",
    "nextjs",
    "supabase",
    "postgresql",
    "typescript",
    "tailwind",
  ]}
  subTitle="Multi-organization CRM Web Application with user management across multiple organizations"
  desc={[
    "Designed role-based access control with isolated data per organization",
    "Built multi-organization CRM platform for customer management, activity tracking, and sales pipeline analytics",
    "Optimized API calls with TanStack Query for client-side caching and request deduplication",
  ]}
  moveLink="https://henry-crm-project.vercel.app/"
  accessMethod="website"
/>

<ProjectContainer
  imgPath={getBannerPath("quick-docx-banner.webp")}
  title="Quick Docx (Active)"
  imgAlt="DOCX template editor with dynamic placeholder replacement"
  skillIcons={[
    getIconPath("devops/oracle-icon.webp"),
    getIconPath("devops/docker-icon.webp"),
    getIconPath("frontend/shadcn-ui-icon.webp"),
    getIconPath("frontend/nextjs-icon.webp"),
    getIconPath("language/typescript-icon.webp"),
    getIconPath("frontend/tailwind-css-icon.webp"),
  ]}
  skillIconAlts={[
    "Oracle",
    "Docker",
    "Shadcn UI",
    "Next.js",
    "TypeScript",
    "Tailwind CSS",
  ]}
  subTitle="DOCX template editor with dynamic placeholder replacement"
  desc={[
    "Developed placeholder replacement for square brackets",
    "Enabled editing of paragraph content",
    "Implemented PDF export using Gotenberg (Docker-based conversion)",
  ]}
  moveLink="https://quick-docx.vercel.app/"
  accessMethod="website"
/>
<ProjectContainer
  imgPath={getBannerPath("auction-banner.webp")}
  title="Auction Website(Role: Backend)"
  imgAlt="Competitive bidding platform built for Full-Stack Development course team project"
  skillIcons={[
    getIconPath("frontend/nextjs-icon.webp"),
    getIconPath("backend/mongodb-icon.webp"),
    getIconPath("language/javascript-icon.webp"),
  ]}
  skillIconAlts={[
    "Next.js",
    "MongoDB",
    "JavaScript",
  ]}
  subTitle="Competitive bidding platform built for Full-Stack Development course team project"
  desc={[
    "Developed backend with NoSQL for full CRUD operations",
    "Handled bid logic to update ownership to the latest bidder",
    "Implemented admin-only accounts for management",
  ]}
  sourceCodeLink="https://github.com/timdonato/csis3380-final"
  moveLink="https://csis3380-final.netlify.app/"
  accessMethod="website"
  team
/>
